import{_ as B,U as S,Y as U,u as V,r as c,E as C,F,c as a,a as o,V as _,W as r,X as n,z as i,o as d,Z as M}from"./CNC7-B4v.js";const P={class:"bg-white rounded-lg shadow p-6"},$={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},j={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},D={class:"mt-1 flex items-center"},E={key:0,class:"inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100"},T=["src"],I={class:"flex justify-end"},z=["disabled"],R={key:0},H={key:1},O={__name:"about",setup(G){const f=S(),m=U();V({title:"About"});const g=c(null),u=c(!1),t=c({title:"",smalldesc:"",description:"",mission:"",vision:"",image:null,imagePreview:null}),b=C(),p=b.public.apiBase||"http://127.0.0.1:8000",x=b.public.mediaBase||"http://127.0.0.1:8000",v=async()=>{try{const l=await $fetch(`${p}/about`,{method:"GET"});if(console.log(l),l?.about){const e=l.about;t.value={title:e.title||"",smalldesc:e.smalldesc||"",description:e.description||"",mission:e.mission||"",vision:e.vision||"",image:typeof t.value.image=="object"?t.value.image:e.image,imagePreview:e.image?e.image:null}}}catch(l){console.error("Error fetching about:",l),m.add({title:"error",description:"Failed to fetch about data",color:"error"})}},y=async()=>{u.value=!0;try{const l=new FormData;Object.keys(t.value).forEach(s=>{s!=="image"&&s!=="imagePreview"&&t.value[s]!==null&&l.append(s,t.value[s])}),(t.value.image instanceof File||typeof t.value.image=="string")&&l.append("image",t.value.image);const e=await $fetch(`${p}/about`,{method:"POST",body:l,headers:{Authorization:`Bearer ${f.token}`}});console.log(e),e.data&&(t.value.image=e.image,t.value.imagePreview=e.image?`${x}${e.image}`:null,m.add({title:"Success",description:"About updated successfully.",color:"success"}),console.log("Saved data:",e.data))}catch(l){console.error("Error saving about:",l),l.response?.status===401&&(await f.logout(),M("/admin/login")),m.add({title:"error",description:"Failed to update about",color:"error"})}finally{u.value=!1}},w=()=>{g.value.click()},h=l=>{const e=l.target.files[0];if(e){const s=new FileReader;s.onload=A=>{t.value={...t.value,image:e,imagePreview:A.target.result}},s.readAsDataURL(e)}},k=()=>{v()};return F(()=>{v()}),(l,e)=>(d(),a("div",null,[e[12]||(e[12]=o("div",{class:"flex justify-between items-center mb-6"},[o("h1",{class:"text-2xl font-bold text-gray-800"},"About Management")],-1)),o("div",P,[o("form",{onSubmit:_(y,["prevent"]),class:"space-y-6"},[o("div",$,[o("div",null,[e[5]||(e[5]=o("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1)),r(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i(t).title=s),type:"text",id:"title",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,i(t).title]])]),o("div",null,[e[6]||(e[6]=o("label",{for:"smalldesc",class:"block text-sm font-medium text-gray-700"},"Short Description",-1)),r(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i(t).smalldesc=s),type:"text",id:"smalldesc",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,i(t).smalldesc]])])]),o("div",null,[e[7]||(e[7]=o("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),r(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>i(t).description=s),id:"description",rows:"4",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,i(t).description]])]),o("div",j,[o("div",null,[e[8]||(e[8]=o("label",{for:"mission",class:"block text-sm font-medium text-gray-700"},"Mission",-1)),r(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>i(t).mission=s),id:"mission",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,i(t).mission]])]),o("div",null,[e[9]||(e[9]=o("label",{for:"vision",class:"block text-sm font-medium text-gray-700"},"Vision",-1)),r(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>i(t).vision=s),id:"vision",rows:"3",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,i(t).vision]])])]),o("div",null,[e[11]||(e[11]=o("label",{class:"block text-sm font-medium text-gray-700"}," Image",-1)),o("div",D,[i(t).image?(d(),a("img",{key:1,src:i(t).image,class:"h-32 w-auto object-cover rounded"},null,8,T)):(d(),a("span",E,e[10]||(e[10]=[o("svg",{class:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})],-1)]))),o("button",{type:"button",onClick:w,class:"ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Change "),o("input",{ref_key:"fileInput",ref:g,type:"file",class:"hidden",accept:"image/*",onChange:h},null,544)])]),o("div",I,[o("button",{type:"button",onClick:k,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),o("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:i(u)},[i(u)?(d(),a("span",R,"Saving...")):(d(),a("span",H,"Save Changes"))],8,z)])],32)])]))}},N=B(O,[["__scopeId","data-v-18a76acc"]]);export{N as default};
