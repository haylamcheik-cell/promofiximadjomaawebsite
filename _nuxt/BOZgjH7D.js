import{U,Y as $,u as V,r as c,E as B,F as A,c as a,a as e,V as C,W as i,X as r,z as l,o as u,Z as F}from"./CNC7-B4v.js";const P={class:"bg-white rounded-lg shadow p-6"},E={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},M={class:"mt-1 flex items-center"},T={key:0,class:"inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100"},j=["src"],z={class:"flex justify-end"},I=["disabled"],R={key:0},D={key:1},O={__name:"Settings",setup(L){const m=U(),g=$();V({title:"Settings"});const b=c(null),d=c(!1),o=c({fb:"",insta:"",linkedin:"",snapchat:"",tiktok:"",call:"",twitter:"",youtube:"",image:null,imagePreview:null}),p=B(),y=p.public.apiBase||"http://127.0.0.1:8000",f=p.public.mediaBase||"http://127.0.0.1:8000",x=async()=>{try{const n=await $fetch(`${y}/settings`,{method:"GET",headers:{Authorization:`Bearer ${m.token}`}});if(console.log("API Response:",n),n.settings){const t=Array.isArray(n.settings)?n.settings[0]:n.settings;o.value={fb:t.fb||"",insta:t.insta||"",linkedin:t.linkedin||"",snapchat:t.snapchat||"",tiktok:t.tiktok||"",call:t.call||"",twitter:t.twitter||"",youtube:t.youtube||"",image:t.image?`${f}/${t.image}`:null,imagePreview:t.image?`${f}/${t.image}`:null}}}catch(n){console.error("Error fetching settings:",n),g.add({title:"Error",description:"Failed to fetch settings data",color:"error"})}},k=async()=>{d.value=!0;try{const n=new FormData;Object.keys(o.value).forEach(s=>{s!=="image"&&s!=="imagePreview"&&o.value[s]!==null&&n.append(s,o.value[s])}),(o.value.image instanceof File||typeof o.value.image=="string")&&n.append("image",o.value.image);const t=await $fetch(`${y}/settings`,{method:"POST",body:n,headers:{Authorization:`Bearer ${m.token}`}});console.log(t),t.settings&&(o.value.image=t.settings.image,o.value.imagePreview=t.settings.image?`${f}${t.settings.image}`:null,g.add({title:"Success",description:"About updated successfully.",color:"success"}),console.log("Saved data:",t.settings))}catch(n){console.error("Error saving about:",n),n.response?.status===401&&(await m.logout(),F("/admin/login")),g.add({title:"error",description:"Failed to update about",color:"error"})}finally{d.value=!1}},v=()=>{b.value.click()},w=n=>{const t=n.target.files[0];if(t){const s=new FileReader;s.onload=S=>{o.value={...o.value,image:t,imagePreview:S.target.result}},s.readAsDataURL(t)}},h=()=>{x()};return A(()=>{x()}),(n,t)=>(u(),a("div",null,[t[18]||(t[18]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"Settings Management")],-1)),e("div",P,[e("form",{onSubmit:C(k,["prevent"]),class:"space-y-6"},[e("div",E,[e("div",null,[t[8]||(t[8]=e("label",{for:"fb",class:"block text-sm font-medium text-gray-700"},"Facebook",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).fb=s),type:"text",id:"fb",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).fb]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"instagram",class:"block text-sm font-medium text-gray-700"},"Instagram",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).instagram=s),type:"text",id:"instagram",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).instagram]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"twitter",class:"block text-sm font-medium text-gray-700"},"Twitter",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l(o).twitter=s),type:"text",id:"twitter",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).twitter]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"tiktok",class:"block text-sm font-medium text-gray-700"},"tiktok",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).tiktok=s),type:"text",id:"tiktok",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).tiktok]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"snapchat",class:"block text-sm font-medium text-gray-700"},"Snapchat",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(o).snapchat=s),type:"text",id:"snapchat",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).snapchat]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"youtube",class:"block text-sm font-medium text-gray-700"},"Youtube",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(o).youtube=s),type:"text",id:"youtube",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).youtube]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"linkedin",class:"block text-sm font-medium text-gray-700"},"Linkedin",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l(o).linkedin=s),type:"text",id:"linkedin",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).linkedin]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"call",class:"block text-sm font-medium text-gray-700"},"Call",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(o).call=s),type:"text",id:"call",class:"form-control mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[r,l(o).call]])])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"}," Logo",-1)),e("div",M,[l(o).image?(u(),a("img",{key:1,src:l(o).image,class:"h-32 w-auto object-cover rounded"},null,8,j)):(u(),a("span",T,t[16]||(t[16]=[e("svg",{class:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})],-1)]))),e("button",{type:"button",onClick:v,class:"ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Change "),e("input",{ref_key:"fileInput",ref:b,type:"file",class:"hidden",accept:"image/*",onChange:w},null,544)])]),e("div",z,[e("button",{type:"button",onClick:h,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),e("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:l(d)},[l(d)?(u(),a("span",R,"Saving...")):(u(),a("span",D,"Save Changes"))],8,I)])],32)])]))}};export{O as default};
