import{_ as b,N as g,T as h,u as w,r as m,E as y,F as x,c as i,a as e,Q as _,O as T,R as k,S as E,z as r,o as a,U as V}from"./BqBcClPL.js";const I={class:"bg-white rounded-lg shadow p-6"},S={class:"mt-1"},$={key:0,class:"mt-6"},B={class:"aspect-w-16 aspect-h-9 rounded-lg overflow-hidden"},C=["src"],M={class:"flex justify-end"},R=["disabled"],U={key:0},Y={key:1},j={__name:"video",setup(F){const n=g(),l=h();w({title:"YouTube Video Management"});const d=m(!1),s=m({video:"",videoId:""}),u=y().public.apiBase||"http://127.0.0.1:8000",c=async()=>{try{const o=await $fetch(`${u}/video`,{method:"GET",headers:{Authorization:`Bearer ${n.token}`}});o?.video?.video&&(s.value.video=`https://www.youtube.com/watch?v=${o.video.video}`,s.value.videoId=o.video.video)}catch(o){console.error("Error fetching video:",o),l.add({title:"Error",description:"Failed to fetch video data",color:"red"})}},f=async()=>{d.value=!0;try{const o=await $fetch(`${u}/video`,{method:"POST",body:{video:s.value.video},headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});o&&(s.value.videoId=o.data.video,l.add({title:"Success",description:"YouTube video updated successfully",color:"green"}))}catch(o){console.error("Error saving video:",o),o.response?.status===401&&(await n.logout(),V("/admin/login")),l.add({title:"Error",description:o.response?.data?.message||"Failed to update video",color:"red"})}finally{d.value=!1}},v=()=>{c()};return x(()=>{c()}),(o,t)=>(a(),i("div",null,[t[4]||(t[4]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800"},"YouTube Video Management")],-1)),e("div",I,[e("form",{onSubmit:_(f,["prevent"]),class:"space-y-6"},[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-gray-700"},"YouTube Video URL",-1)),e("div",S,[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>r(s).video=p),type:"url",placeholder:"https://www.youtube.com/watch?v=...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border",required:""},null,512),[[E,r(s).video]])]),t[3]||(t[3]=e("p",{class:"mt-2 text-sm text-gray-500"},"Enter a valid YouTube URL (e.g., https://www.youtube.com/watch?v=VIDEO_ID)",-1)),r(s).videoId?(a(),i("div",$,[t[1]||(t[1]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Preview",-1)),e("div",B,[e("iframe",{class:"w-full h-full",src:`https://www.youtube.com/embed/${r(s).videoId}?rel=0&modestbranding=1`,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,C)])])):T("",!0)]),e("div",M,[e("button",{type:"button",onClick:v,class:"mr-3 bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),e("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:r(d)},[r(d)?(a(),i("span",U,"Saving...")):(a(),i("span",Y,"Save Changes"))],8,R)])],32)])]))}},D=b(j,[["__scopeId","data-v-1cf4fbd4"]]);export{D as default};
